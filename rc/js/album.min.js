var currentId=0;var maxId=0;(function(a,b){if(typeof define==="function"&&define.amd){define(function(){return b(a)})}else{if(typeof exports==="object"){module.exports=b}else{a.echo=b(a)}}})(this,function(i){var c={};var k=function(){};var e,g,f,j,d;var a=function(l){return(l.offsetParent===null)};var h=function(m,l){if(a(m)){return false}var n=m.getBoundingClientRect();return(n.right>=l.l&&n.bottom>=l.t&&n.left<=l.r&&n.top<=l.b)};var b=function(){if(!j&&!!g){return}clearTimeout(g);g=setTimeout(function(){c.render();g=null},f)};c.init=function(p){p=p||{};var n=p.offset||0;var m=p.offsetVertical||n;var o=p.offsetHorizontal||n;var l=function(q,r){return parseInt(q||r,10)};e={t:l(p.offsetTop,m),b:l(p.offsetBottom,m),l:l(p.offsetLeft,o),r:l(p.offsetRight,o)};f=l(p.throttle,250);j=p.debounce!==false;d=!!p.unload;k=p.callback||k;c.render();if(document.addEventListener){i.addEventListener("scroll",b,false);i.addEventListener("load",b,false)}else{i.attachEvent("onscroll",b);i.attachEvent("onload",b)}};c.render=function(){var m=document.querySelectorAll("img[data-echo], [data-echo-background]");var p=m.length;var q,o;var l={l:0-e.l,t:0-e.t,b:(i.innerHeight||document.documentElement.clientHeight)+e.b,r:(i.innerWidth||document.documentElement.clientWidth)+e.r};for(var n=0;n<p;n++){o=m[n];if(h(o,l)){if(d){o.setAttribute("data-echo-placeholder",o.src)}if(o.getAttribute("data-echo-background")!==null){o.style.backgroundImage="url("+o.getAttribute("data-echo-background")+")"}else{o.src=o.getAttribute("data-echo")}if(!d){o.removeAttribute("data-echo");o.removeAttribute("data-echo-background")}k(o,"load")}else{if(d&&!!(q=o.getAttribute("data-echo-placeholder"))){if(o.getAttribute("data-echo-background")!==null){o.style.backgroundImage="url("+q+")"}else{o.src=q}o.removeAttribute("data-echo-placeholder");k(o,"unload")}}}if(!p){c.detach()}};c.detach=function(){if(document.removeEventListener){i.removeEventListener("scroll",b)}else{i.detachEvent("onscroll",b)}clearTimeout(g)};c.init({offset:500,throttle:250,unload:true,debounce:true});return c});$(document).ready(function(){$(function(){$("#album #nav-years ul li a").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){$("#album #nav-years ul li").removeClass("active");$(this).parent().addClass("active");var a=$(this.hash);a=a.length?a:$("[name="+this.hash.slice(1)+"]");if(a.length){$("html, body").animate({scrollTop:a.offset().top-90},500);return false}}})});maxId=$("#album .photos-list .box").length-1;$(".modal-trigger").click(function(a){currentId=parseInt(this.dataset.ind);$(".photo-container img").attr("src",$(this).attr("id")+".jpg");$(".comments-frame").attr("src",$(this).attr("id")+".html");$(".modal-next").prop("disabled",false);if(currentId>0){$(".modal-previous").prop("disabled",false)}else{$(".modal-previous").prop("disabled",true)}if(currentId<maxId){$(".modal-next").prop("disabled",false)}else{$(".modal-next").prop("disabled",true)}$(".modal-close").prop("disabled",false);$(document).bind("keydown",function(b){switch(b.which){case 37:if(!$(".modal-previous").prop("disabled")){show_previous()}break;case 39:if(!$(".modal-next").prop("disabled")){show_next()}break;default:return}b.preventDefault()});$("#viewerModal").on("hidden.bs.modal",function(){$(document).unbind("keydown")});$("#viewerModal").modal("show");return false});show_previous=function(b){currentId=currentId-1;var a=$('a[data-ind="'+currentId+'"]').attr("id");$(".photo-container img").attr("src",a+".jpg");$(".comments-frame").attr("src",a+".html");if(currentId>0){$(".modal-previous").prop("disabled",false)}else{$(".modal-previous").prop("disabled",true)}$(".modal-next").prop("disabled",false);return false};show_next=function(b){currentId=currentId+1;var a=$('a[data-ind="'+currentId+'"]').attr("id");$(".photo-container img").attr("src",a+".jpg");$(".comments-frame").attr("src",a+".html");$(".modal-previous").prop("disabled",false);if(currentId<maxId){$(".modal-next").prop("disabled",false)}else{$(".modal-next").prop("disabled",true)}return false};$(".modal-previous").click(show_previous);$(".modal-next").click(show_next)});